jQuery(document).ready(function(){window.ijc={code_ijcwindow:document.getElementById("code_ijcwindow"),history_ijcwindow:document.getElementById("history_ijcwindow"),main_box:document.getElementById("mainbox_ijcwindow"),mixedin:!1,cmd_history:[],history_cursor:0,htmlEncode:function(i){return 0==i.length?"":i.replace(/&/g,"&").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"Â ").replace(/\'/g,"'").replace(/\"/g,'"')},mixin:function(){if(!ijc.mixedin){for(key in ijc)"function"==typeof ijc[key]&&(window["__original__"+key]=window[key],window[key]=ijc[key]);ijc.mixedin=!0}},unmixin:function(){if(ijc.mixedin){for(key in ijc)"function"==typeof ijc[key]&&(window[key]=window["__original__"+key]);ijc.mixedin=!1}},add_history:function(i){ijc.cmd_history[ijc.cmd_history.length-1]!=i&&ijc.cmd_history.push(i),ijc.history_cursor=ijc.cmd_history.length},prev_history:function(){return ijc.history_cursor>0?ijc.cmd_history[--ijc.history_cursor]:void 0},next_history:function(){return ijc.history_cursor<ijc.cmd_history.length-1?ijc.cmd_history[++ijc.history_cursor]:void 0},outputbuf:[],MAX_HISTORY_BYTES:65536,flush:function(){ijc.history_ijcwindow.innerHTML+=ijc.outputbuf.join(""),ijc.outputbuf=[];var i=ijc.history_ijcwindow.innerHTML.length;i>ijc.MAX_HISTORY_BYTES&&(ijc.history_ijcwindow.innerHTML=ijc.history_ijcwindow.innerHTML.substring(i-ijc.MAX_HISTORY_BYTES,i-1)),ijc.main_box.scrollTop=ijc.main_box.scrollHeight},print:function(i){arguments.length>1&&void 0!==arguments[1]&&arguments[1],ijc.outputbuf.push(i)},puts:function(i){arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?ijc.print(i):ijc.print(i+"<br>")},inspect:function(i){var e=i;try{if("string"==typeof i);else if(i instanceof Array)e="["+i+"]";else{var t=[];for(key in i)t.push(key+":"+i[key]);t.length>0&&(e="{"+t.join(", ")+"}")}}catch(i){}return e},clear:function(){ijc.outputbuf=[],history_ijcwindow.value=""},common_substring:function(e){if(0!=e.length){if(1==e.length)return e[0];if(jQuery.browser.msie){var t=e[0].split("");for(i=1;i<e.length;i++){var c=(n=e[i].split("")).length>t.length?n.length:t.length;for(j=0;j<c&&n[j]==t[j];j++);t=t.slice(0,j)}t=t.join("")}else{t=e[0];for(i=1;i<e.length;i++){var n;c=(n=e[i]).length>t.length?n.length:t.length;for(j=0;j<c&&n[j]==t[j];j++);t=t.substr(0,j)}}return t}},hint:function hint(word){var stub="",stub2="",context="",partial="";(m=word.match(/^(.*[^\w.])?(([\w.]+)\.)$/))?(stub=(m[1]||"")+(m[2]||""),stub2=m[2]||"",context=m[3]||"",partial=""):(m=word.match(/^(.*[^\w.])?(([\w.]+)\.)?(\w+)$/))&&(stub=(m[1]||"")+(m[2]||""),stub2=m[2]||"",context=m[3]||"window",partial=m[4]||"");try{var replacements=[],results=[],r=eval(context);if(r instanceof Array)return;for(key in r)0!=key.indexOf(partial)&&0!=partial.length||(replacements.push(stub+key),"function"==typeof r[key]?results.push(stub2+key+"()"):results.push(stub2+key));return{rep:ijc.common_substring(replacements),hints:results}}catch(i){return}},loaded_js:[],loaded_css:[],load:function(i,e){var t;return e||(e=i.match(/[^.]$/)[0]),"js"==e&&ijc.loaded_js.indexOf(i)<0?(ijc.loaded_js.push(i),(t=document.createElement("script")).setAttribute("type","text/javascript"),t.setAttribute("src",i),document.getElementsByTagName("head")[0].appendChild(t),!0):"css"==e&&ijc.loaded_css.indexOf(i)<0&&(ijc.loaded_css.push(i),(t=document.createElement("link")).setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",i),document.getElementsByTagName("head")[0].appendChild(t),!0)},loadjs:function(i){return ijc.load(i,"js")},loadcss:function(i){return ijc.load(i,"css")},consoleLog:function(i){ijc.puts(i),ijc.flush()},evaluate:function evaluate(){var c=ijc.code_ijcwindow,r;ijc.puts("<font color=#2185d0>&gt;</font> "+ijc.htmlEncode(c.value)),ijc.add_history(c.value);var isErr=0;try{r=eval(c.value.replace(/console.log/g,"ijc.consoleLog"))}catch(i){isErr=1,r='<div class="ui red message" style="margin: 0;"><div class="header">'+i.name+"</div><p>"+i.message+"</p></div>"}null!=r&&(isErr?ijc.puts(ijc.inspect(r),0):("string"==typeof r?r='<font color=#718c00>"'+r+'"</font>':"number"==typeof r&&(r="<font color=#f5871f>"+r+"</font>"),ijc.puts(ijc.inspect(r)))),ijc.puts("<div class='ui divider' style='margin: 0;'></div>",0),ijc.flush(),c.value="",c.focus()},callstack:function(){for(var i=[],e=arguments.callee.caller;!e&&e!=ijc.evaluate;)i.push(e),e=e.arguments.callee.caller;return i}},jQuery("#code_ijcwindow").keydown(function(i){switch(i.keyCode){case 9:var e=ijc.hint(ijc.code_ijcwindow.value);e&&(0==e.hints.length||(1==e.hints.length?ijc.code_ijcwindow.value=e.rep:(ijc.puts("(hint)"),ijc.puts(e.hints.join("\t\t")),ijc.flush(),e.rep&&(ijc.code_ijcwindow.value=e.rep))));break;case 38:ijc.code_ijcwindow.value=ijc.prev_history()||ijc.code_ijcwindow.value;break;case 40:ijc.code_ijcwindow.value=ijc.next_history()||ijc.code_ijcwindow.value;break;case 13:ijc.evaluate();break;default:return!0}return!1}),jQuery("#code_ijcevaluate").click(function(){ijc.evaluate()}),jQuery("#code_ijcevaluate").focus(function(){setTimeout(function(){ijc.code_ijcwindow.focus()},1)}),ijc.mixin(),ijc.code_ijcwindow.focus()});